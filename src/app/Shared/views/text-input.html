<div class="text-input-wrapper">
  <mat-form-field
    appearance="outline"
    style="width: 100%;"
    [ngClass]= "(controlDir && controlDir.control &&
    controlDir.control.touched)? !controlDir.control.valid ? 'mat-form-field-invalid' :
    'mat-form-field-valid' : null">
    <mat-label class="label">{{label}}</mat-label>
    <input
      matInput
      [type]="type"
      (input)="onChange($event.target.value)"
      (blur)="onTouched()"
      id="{{label}}"
      class="text-input"
      required
      #input>
    <ion-icon
      matSuffix
      name="alert-circle-outline"
      class="invalid"
      *ngIf="(controlDir && controlDir.control && !controlDir.control.valid && controlDir.control.touched)">
    </ion-icon>
    <ion-icon
      matSuffix
      name="checkmark-outline"
      class="valid"
      *ngIf="(controlDir && controlDir.control && controlDir.control.valid && controlDir.control.touched)">
    </ion-icon>
  </mat-form-field>
  <div
    class="invalid-feedback"
    *ngIf="(controlDir && controlDir.control && !controlDir.control.valid && controlDir.control.touched)">
    <mat-error *ngIf="controlDir.control.errors?.required">{{label}} is required</mat-error>
    <mat-error *ngIf="controlDir.control.errors?.pattern">Invalid Email Address</mat-error>
  </div>
</div>
